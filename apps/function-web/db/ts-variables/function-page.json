{
  "createdAt": 1669276192993,
  "updatedAt": 1669276192993,
  "deletedAt": 0,
  "createdFirstAt": 1669276192993,
  "classification": "const",
  "comments": [],
  "isExported": true,
  "name": "FunctionPage",
  "slug": "function-page",
  "operationRelativeTypescriptFilePath": "src/components/FunctionPage.tsx",
  "type": {
    "rawType": "() => JSX.Element",
    "typeDefinition": {
      "type": "object",
      "properties": {},
      "optional": false
    },
    "typeCoverage": 0,
    "isArray": false,
    "isEnum": false,
    "isObject": true,
    "isPrimitive": false,
    "isEnumLiteral": false,
    "simplifiedSchema": {
      "properties": [],
      "type": "object"
    }
  },
  "value": "() => {\n  const router = useRouter();\n\n  const fullPath = router.query.paths ? makeArray(router.query.paths) : [];\n\n  const functionName = fullPath.pop();\n  const queryPath = getQueryPath(router.query);\n\n  const tsFunctionQuery = queries.useGetTsFunction(functionName);\n  // todo : add query to tsFunction\n  const { tsFunction } = destructureOptionalObject(\n    tsFunctionQuery.data?.result\n  );\n\n  const functionExecutions =\n    queries.useGetFunctionExecutions(functionName).data?.result || [];\n\n  const renderNavigation = () => {\n    return (\n      <Div className=\"flex flex-row justify-between\">\n        {queryPath.length > 1 ? (\n          <ClickableIcon\n            emoji=\"⬅\"\n            onClick={() => {\n              const parts = queryPath.split(\"/\");\n              parts.pop();\n              const oneFolderUp = parts.join(\"/\");\n              router.push(oneFolderUp.length === 0 ? \"/\" : oneFolderUp);\n            }}\n          />\n        ) : null}\n        <P className=\"text-3xl\">{functionName}</P>\n        <Div />\n      </Div>\n    );\n  };\n\n  const renderPage = () => {\n    if (!tsFunction) {\n      return tsFunctionQuery.isLoading ? (\n        <FancyLoader big />\n      ) : (\n        <P>Select a function to get to work</P>\n      );\n    }\n\n    /**\n  ### Tab 7: Recent executions tab\n  \n  `FunctionExecution[].sort(createdAt).slice(0,100)`\n  \n  Actions for every item:\n  \n  - set `isTest` to true\n  - set `isExample` to true\n  - fill in in form in tab 1\n  - execute directly\n  \n     */\n    const recentTab = {\n      title: \"Recent\",\n      emoji: \"🕰️\",\n      renderTab: () => {\n        return (\n          <FunctionExecutionTable\n            tsFunction={tsFunction}\n            type={\"recent\"}\n            functionExecutions={functionExecutions}\n          />\n        );\n      },\n    };\n\n    const formTab = {\n      title: \"Form\",\n      emoji: \"📝\",\n      renderTab: () => <FormTab tsFunction={tsFunction} />,\n    };\n\n    /** \n  ### Tab 2: Function Docs\n\n  Generate on the fly based on the `TsFunction` (extrahere from docs generation lib)\n\n  */\n    const docsTab = {\n      title: \"Docs\",\n      emoji: \"ℹ️\",\n      renderTab: () => {\n        return (\n          <>\n            <P className=\"text-xl lg:text-4xl w-full\">\n              &nbsp;&nbsp;{tsFunction?.name}\n            </P>\n\n            {tsFunction?.description ? (\n              // TODO: use `props.functionData.tsFunction.operationRelativeTypescriptFilePath` to deterimne markdown file path and folder\n\n              <Div>\n                <MarkdownView\n                  markdownParse={mdToJsonParse(tsFunction.description)}\n                  markdownParseRenderConfig={{\n                    projectRelativeMarkdownFilePath: \"\",\n                    projectRelativeBaseFolderPath: \"\",\n                  }}\n                  view=\"view\"\n                />\n              </Div>\n            ) : null}\n          </>\n        );\n      },\n    };\n\n    /**\n     * TAB 3: Code\n     *\n     * TODO: Can later be replaced with the writer-input for the file of the function, so you can immediately see your coding result in the other tabs...\n     */\n    const codeTab = {\n      title: \"Code\",\n      emoji: \"💻\",\n      renderTab: () => {\n        return tsFunction?.rawText ? (\n          <Div className=\"flex flex-col items-center\">\n            <MarkdownCodeblock\n              text={`const ${tsFunction.name} =${tsFunction.rawText}`}\n              extension=\"ts\"\n              isModeStatic\n              minimalMode=\"full\"\n            />\n\n            <Div className=\"flex flex-col items-center pt-8 gap gap-6\">\n              <P>Wanna start?</P>\n\n              <BigButton\n                title=\"Open in VSCode\"\n                onClick={async () => {\n                  if (!tsFunction.operationName) {\n                    errorToast(\n                      \"Couldn't find which operation this function belongs to, can't open the file\"\n                    );\n                    return;\n                  }\n\n                  const result = await api.vscodeOpen({\n                    files: [\n                      {\n                        operationName: tsFunction.operationName,\n                        operationRelativeFilePath:\n                          tsFunction.operationRelativeTypescriptFilePath,\n                      },\n                    ],\n                  });\n\n                  return;\n                }}\n                emoji=\"👨‍💻\"\n              />\n            </Div>\n          </Div>\n        ) : (\n          \"Code not found\"\n        );\n      },\n    };\n\n    /**\n            ### Tab 4: Exersize tab\n\n            Get all examples of this function, write exersize in markdown (ask Wijnand for more details)\n            */\n\n    const exersizeTab = {\n      title: \"Exersizes\",\n      emoji: \"👶\",\n      renderTab: () => {\n        return \"ex\";\n      },\n    };\n\n    /**\n### Tab 5: Examples Tab\n\n`FunctionExecution[].filter(x.isExample)`\n\nShow `x.exampleDescription` too (markdown)\n\nActions for every item:\n\n- set `isExample` to false\n- set `isTest` to true\n- fill in in form in tab 1\n- execute directly\n\n*/\n\n    const examplesTab = {\n      title: \"Examples\",\n      emoji: \"👻\",\n      renderTab: () => {\n        return (\n          <FunctionExecutionTable\n            tsFunction={tsFunction}\n            type={\"example\"}\n            functionExecutions={functionExecutions}\n          />\n        );\n      },\n    };\n\n    /**\n### Tab 6: Tests Tab\n\n`FunctionExecution[].filter(x.isTest))`\n\nActions for every item:\n\n- set `isTest` to false\n- set `isExample` to true\n- fill in in form in tab 1\n- execute directly\n*/\n\n    const testsTab = {\n      title: \"Tests\",\n      emoji: \"🔧\",\n      renderTab: () => {\n        return (\n          <FunctionExecutionTable\n            tsFunction={tsFunction}\n            type={\"test\"}\n            functionExecutions={functionExecutions}\n          />\n        );\n      },\n    };\n\n    const dataTab = {\n      title: \"Data\",\n      emoji: \"💿\",\n      renderTab: () => {\n        return \"This tab can later show the models that are put under in the doc-comment as being relevant. E.g. if you put 'DATA: JeepType, LocationType' in your function's doc-comment, it would show the CRUD-UI for those models in this tab. Possibly, one tab for every model, or simply one tab for all models and visually make it disabled if there is no data connected to the function...\";\n      },\n    };\n\n    const mediaTab = {\n      title: \"Media\",\n      emoji: \"👥\",\n      renderTab: () => {\n        return (\n          <Div>\n            <Ul>\n              <Li>Show related postables & media-posts</Li>\n              <Li>Create new postable</Li>\n              <Li>\n                Basically, the social-media-ui but just focussed on this\n                function\n              </Li>\n            </Ul>\n          </Div>\n        );\n      },\n    };\n\n    const treeTab = {\n      title: \"Trees\",\n      emoji: \"🌳\",\n      renderTab: () => {\n        return (\n          <Div className=\"w-max h-80\">\n            <Ul>\n              <Li>\n                Show graph with the function in the middle, below all functions\n                that are required for the function (dependencies), above all the\n                functions that require this function (dependents)\n              </Li>\n              <Li>\n                Being able to see this multiple multiple layers deep would be\n                great (configurable).\n              </Li>\n              <Li>\n                Dependencies must be brown (root like) while dependents (up)\n                must be green (leave like)\n              </Li>\n              <Li>\n                Other tree: find other functions that take the output type of\n                this function as its input. Use the output of your\n                FunctionExecutions on \"related\" functions.\n              </Li>\n            </Ul>\n\n            <Test />\n          </Div>\n        );\n      },\n    };\n    return (\n      <Div>\n        {renderNavigation()}\n\n        <Tabs\n          tabs={[\n            codeTab,\n            formTab,\n            //dataTab,\n            recentTab,\n            testsTab,\n            examplesTab,\n            docsTab,\n            //treeTab,\n            //exersizeTab,\n            //mediaTab,\n          ]}\n        />\n      </Div>\n    );\n  };\n\n  return (\n    <Div className=\"pb-4 px-4 w-full\" scroll>\n      {renderPage()}\n    </Div>\n  );\n}",
  "description": "",
  "id": "lvpqmwdrukinbaapyepkqyys"
}