{
  "createdAt": 1663305102949,
  "updatedAt": 1663305102949,
  "deletedAt": 0,
  "createdFirstAt": 1663305102949,
  "apiAuthenticationStrategy": "admin",
  "isApiExposed": true,
  "isExported": true,
  "operationRelativeTypescriptFilePath": "src/getBundleSummary.ts",
  "commentsInside": [],
  "rawText": " (bundleConfig: BundleConfig): BundleSummary => {\n  const operationsPath = getRootPath(\"operations\");\n  const bundlesPath = operationsPath\n    ? path.join(operationsPath, \"bundles\")\n    : undefined;\n\n  const foldersFromRepo = bundlesPath\n    ? bundleConfig.foldersFromRepo?.map((x) =>\n        path.join(bundlesPath, kebabCase(bundleConfig.name), x)\n      )\n    : undefined;\n\n  // const filesAndFoldersToInclude = [\n  //   // ...(foldersFromRepo || []),\n  //   bundleConfig.readmeRelativeFilePath,\n  //   bundleConfig.docsRelativeFolderPath,\n  // ].filter(notEmpty);\n\n  const appNames = bundleConfig.bundles\n    .map((x) => {\n      const frontendOperationNames = makeArray(\n        x.appShellOperationNames,\n        x.serverOperationName\n      );\n\n      return frontendOperationNames;\n    })\n    .flat()\n    .filter(onlyUnique2());\n\n  const uiOperationNames = makeArray(\n    bundleConfig.bundles.map((x) => x.uiOperationName).filter(notEmpty)\n  );\n\n  const bundlePublicOperationNames = bundleConfig.bundles\n    .map(\n      (x) =>\n        x.operations\n          ?.filter((x) => x.privacy === \"public\")\n          .map((x) => x.operationName) || []\n    )\n    .flat();\n  const bundlePrivateOperationNames = bundleConfig.bundles\n    .map(\n      (x) =>\n        x.operations\n          ?.filter((x) => x.privacy === \"private\")\n          .map((x) => x.operationName) || []\n    )\n    .flat();\n\n  const packageNames = bundleConfig.dependencies\n    .filter((x) => x.privacy === \"public\")\n    .map((x) => x.operationName)\n    .concat(uiOperationNames)\n    .concat(bundlePublicOperationNames)\n    .filter(onlyUnique2());\n\n  const moduleNames = bundleConfig.dependencies\n    .filter((x) => x.privacy === \"private\")\n    .map((x) => x.operationName)\n    .concat(bundlePrivateOperationNames)\n    .filter(onlyUnique2());\n\n  const summary: BundleSummary = {\n    // filesAndFoldersToInclude,\n    packageNames,\n    moduleNames,\n    appNames,\n  };\n\n  return summary;\n}",
  "name": "getBundleSummary",
  "slug": "get-bundle-summary",
  "parameters": [
    {
      "name": "bundleConfig",
      "schema": {
        "$ref": "#/definitions/BundleConfig"
      },
      "simplifiedSchema": {
        "description": "--- dbStorageMethod: jsonSingle\n---",
        "properties": [
          {
            "name": "isOffline",
            "required": false,
            "schema": {
              "description": "if true, will not clone/pull/push and deploy. No internet is needed, will also not use any `.git` folder.",
              "type": "boolean"
            }
          },
          {
            "name": "skipPull",
            "required": false,
            "schema": {
              "description": "skips the step where it gets the new stuff from github",
              "type": "boolean"
            }
          },
          {
            "name": "skipPush",
            "required": false,
            "schema": {
              "description": "skips the step where it pushes the new bundle to remote",
              "type": "boolean"
            }
          },
          {
            "name": "skipUpsert",
            "required": false,
            "schema": {
              "description": "skips the step where it saves to the db",
              "type": "boolean"
            }
          },
          {
            "name": "debug",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "description",
            "required": false,
            "schema": {
              "description": "descriptioin for git commit, if pushing. Default is \"monorepo update\"",
              "type": "string"
            }
          },
          {
            "name": "branchName",
            "required": false,
            "schema": {
              "description": "optionally, specify a custom branch name to pull from / push to / checkout (default is \"main\")",
              "type": "string"
            }
          },
          {
            "name": "gitRepoUrl",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "gitUserEmail",
            "required": false,
            "schema": {
              "description": "Configuration for your commit (needed for vercel deployment)",
              "type": "string"
            }
          },
          {
            "name": "gitUserName",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "name",
            "required": true,
            "schema": {
              "description": "Human readable name of the monorepo (A kebab-case version of this will be used as root foldername)",
              "type": "string"
            }
          },
          {
            "name": "operationName",
            "required": true,
            "schema": {
              "description": "name of operation the model belongs to\n\n- calculated value (not stored in database)\n- can be `null` or an actual operationName that it was saved at\n- can be `undefined` when you are creating an item, because then it can be set for you",
              "type": "null"
            }
          },
          {
            "name": "projectRelativePath",
            "required": true,
            "schema": {
              "description": "path to dbfile\n\n- calculated value (not stored in database)\n- relatively from the project (without slash at start)\n- can be `undefined` when you are creating an item, because then it can be set for you",
              "type": "string"
            }
          },
          {
            "name": "operationRelativePath",
            "required": false,
            "schema": {
              "description": "path to db file\n\n- relatively from the operation root folder (without slash at start)\n- calculated value (not stored in database)\n- can be `undefined` if the db file does not belong to an operation\n- can be `undefined` when you are creating an item, because then it can be set for you",
              "type": "string"
            }
          },
          {
            "name": "bundles",
            "required": true,
            "schema": {
              "items": [],
              "type": "array"
            }
          },
          {
            "name": "dependencies",
            "required": true,
            "schema": {
              "description": "Generated, private by default. If they're already here, uses private/public setting as given.\n\nWhen generating, removes the ones that are not dependencies (of dependencies) of your standalone apps",
              "items": [],
              "type": "array"
            }
          },
          {
            "name": "foldersFromRepo",
            "required": false,
            "schema": {
              "description": "if given, it will fetch these folders from the repo and paste them in the bundle whenever the bundle is generated\n\ncan be handy if you're working with someone else...",
              "items": [
                {
                  "schema": {
                    "type": "string"
                  },
                  "name": null
                }
              ],
              "type": "array"
            }
          }
        ],
        "type": "object"
      },
      "required": true
    }
  ],
  "description": "Summarizes a bundle config so it can be used easily in things like explore project",
  "returnType": {
    "rawType": "import(\"/Users/king/King/operations/tools/deployment/bundling/bundle-util/src/getBundleSummary\").BundleSummary",
    "typeDefinition": {
      "type": "object",
      "properties": {
        "packageNames": {
          "type": "array",
          "items": {
            "type": "string",
            "allOf": [
              {
                "transform": [
                  "trim"
                ]
              },
              {
                "minLength": 1
              }
            ]
          }
        },
        "moduleNames": {
          "type": "array",
          "items": {
            "type": "string",
            "allOf": [
              {
                "transform": [
                  "trim"
                ]
              },
              {
                "minLength": 1
              }
            ]
          }
        },
        "appNames": {
          "type": "array",
          "items": {
            "type": "string",
            "allOf": [
              {
                "transform": [
                  "trim"
                ]
              },
              {
                "minLength": 1
              }
            ]
          }
        }
      },
      "required": [
        "packageNames",
        "moduleNames",
        "appNames"
      ],
      "optional": false
    },
    "typeCoverage": 0,
    "isArray": false,
    "isEnum": false,
    "isObject": true,
    "isPrimitive": false,
    "isEnumLiteral": false,
    "simplifiedSchema": {
      "properties": [
        {
          "name": "packageNames",
          "required": true,
          "schema": {
            "items": [
              {
                "schema": {
                  "type": "string"
                },
                "name": null
              }
            ],
            "type": "array"
          }
        },
        {
          "name": "moduleNames",
          "required": true,
          "schema": {
            "items": [
              {
                "schema": {
                  "type": "string"
                },
                "name": null
              }
            ],
            "type": "array"
          }
        },
        {
          "name": "appNames",
          "required": true,
          "schema": {
            "items": [
              {
                "schema": {
                  "type": "string"
                },
                "name": null
              }
            ],
            "type": "array"
          }
        }
      ],
      "type": "object"
    }
  },
  "maxIndentationDepth": 5,
  "size": {
    "characters": 2026,
    "lines": 73,
    "bytes": 2026,
    "bytesPerCharacter": 1,
    "charactersPerLine": 28,
    "linesPerFile": 73,
    "numberOfFiles": 1
  },
  "id": "nWNwRnBIrgBQRJER"
}