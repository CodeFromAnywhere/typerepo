"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},__assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Menu=void 0;var jsx_runtime_1=require("react/jsx-runtime"),fancy_loader_1=require("fancy-loader"),nested_menu_1=require("nested-menu"),react_1=require("react"),react_with_native_1=require("react-with-native"),file_search_1=require("file-search"),clickable_icon_1=require("clickable-icon"),store_1=require("./store"),hotkeys_1=require("hotkeys"),Menu=function(e){var t=e.queryPaths,r=e.isLoading,n=e.message,s=e.augmentedWords,i=e.menuType,_=e.menuTypes,a=e.setMenuType,u=(0,store_1.useStore)("menu.showMenu"),c=u[0],o=u[1];(0,hotkeys_1.useHotkey)(hotkeys_1.isCtrlP,(function(){return o(!0)}),[]),(0,hotkeys_1.useHotkey)(hotkeys_1.isAltB,(function(){return o(!c)}),[c]);var l=(0,store_1.useStore)("menu.isMobileMenuEnabled"),h=(l[0],l[1]),d=t?(0,nested_menu_1.queryPathsArrayToNestedPathObject)(t):void 0,m=d?(0,nested_menu_1.nestedPathObjectToNestedMenuRecursive)(d,[],{getHref:function(e){return e}}):void 0,x=(0,react_1.useState)(""),j=x[0],v=x[1],f=j.length>0,g=(0,jsx_runtime_1.jsx)(react_with_native_1.Div,__assign({className:"lg:hidden"},{children:(0,jsx_runtime_1.jsx)(react_with_native_1.Div,{children:(0,jsx_runtime_1.jsx)(clickable_icon_1.ClickableIcon,{emoji:"â•³",onClick:function(){h(!1)}})})}));
/**
     * This is a slow function to calculate for a lot of paths, needs to be optimised
     */return(0,jsx_runtime_1.jsxs)(react_with_native_1.Div,{children:[(0,jsx_runtime_1.jsxs)(react_with_native_1.Div,__assign({className:"flex flex-row justify-between w-full"},{children:[a&&i&&_?(0,jsx_runtime_1.jsx)(react_with_native_1.Div,__assign({className:"flex flex-row gap gap-2"},{children:null==_?void 0:_.map((function(e,t){return(0,jsx_runtime_1.jsx)(react_with_native_1.Div,__assign({className:"".concat(e.type===i?"bg-gray-200 dark:bg-gray-800 rounded-full":void 0," w-7 h-7 flex justify-center items-center")},{children:(0,jsx_runtime_1.jsx)(clickable_icon_1.ClickableIcon,{onClick:function(){return a(e.type)},emoji:e.emoji})}),e.type)}))})):(0,jsx_runtime_1.jsx)(react_with_native_1.Div,{}),g]})),(0,jsx_runtime_1.jsx)(react_with_native_1.Input,{value:j,placeholder:"Search",onChange:function(e){return v(e.target.value)},className:"border-b px-2 border-black dark:border-white bg-transparent w-full rounded-2xl"}),r?(0,jsx_runtime_1.jsx)(fancy_loader_1.FancyLoader,{}):f&&t?(0,jsx_runtime_1.jsx)(file_search_1.PathSearchResults,{search:j,paths:t,augmentedWords:s}):!f&&m?(0,jsx_runtime_1.jsx)(nested_menu_1.NestedMenu,{items:m,headersClickable:!0}):(0,jsx_runtime_1.jsxs)(react_with_native_1.P,{children:[n||"Menu.tsx: Something's wrong, no message given",") "]})]})};exports.Menu=Menu;
//# sourceMappingURL=Menu.js.map