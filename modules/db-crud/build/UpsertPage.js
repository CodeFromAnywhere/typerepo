"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var i,t=1,r=arguments.length;t<r;t++)for(var l in i=arguments[t])Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l]);return e},__assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.UpsertPage=void 0;var jsx_runtime_1=require("react/jsx-runtime"),react_with_native_1=require("react-with-native"),react_with_native_router_1=require("react-with-native-router"),js_util_1=require("js-util"),useGetDbModelQuery_1=require("./useGetDbModelQuery"),UpsertForm_1=require("./UpsertForm"),schema_util_1=require("schema-util"),useModelQuery_1=require("./useModelQuery"),UpsertPage=function(){var e,i,t,r,l,u,o,n,s,a,d=(0,react_with_native_router_1.useRouter)(),_=(0,useModelQuery_1.useModelQuery)(),v=(0,js_util_1.mapValuesSync)(d.query,(function(e){return(0,js_util_1.takeFirst)(e)})),c=(0,useGetDbModelQuery_1.useGetDbModelQuery)(_),p=null===(i=null===(e=null==c?void 0:c.data)||void 0===e?void 0:e.pages)||void 0===i?void 0:i.map((function(e){var i;return null===(i=e.result)||void 0===i?void 0:i.data})).flat().filter(js_util_1.notEmpty),m=null==p?void 0:p.find((function(e){return e.id===v.id})),f=null===(l=null===(r=null===(t=null==c?void 0:c.data)||void 0===t?void 0:t.pages[0])||void 0===r?void 0:r.result)||void 0===l?void 0:l.index,h=null===(n=null===(o=null===(u=null==c?void 0:c.data)||void 0===u?void 0:u.pages[0])||void 0===o?void 0:o.result)||void 0===n?void 0:n.fileLocations,g=(null==m?void 0:m.projectRelativePath)||(null==h?void 0:h[0])||"",y=null===(s=null==f?void 0:f.type)||void 0===s?void 0:s.simplifiedSchema,j=null===(a=(0,schema_util_1.getReferencableModels)(y))||void 0===a?void 0:a.map((function(e){return e.interfaceName})).filter(js_util_1.notEmpty);return(0,jsx_runtime_1.jsx)(react_with_native_1.Div,__assign({scroll:!0,className:"py-4 px-8 lg:px-20"},{children:c.isLoading||!y?null:(0,jsx_runtime_1.jsx)(UpsertForm_1.UpsertForm,{projectRelativeStorageFilePath:g,simplifiedSchema:y,instance:m,referencableModelNames:j})}))};exports.UpsertPage=UpsertPage;
//# sourceMappingURL=UpsertPage.js.map