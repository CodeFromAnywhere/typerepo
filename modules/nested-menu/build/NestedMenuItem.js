"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},__assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NestedMenuItem=exports.useExpanded=void 0;var jsx_runtime_1=require("react/jsx-runtime"),react_with_native_1=require("react-with-native"),react_with_native_router_1=require("react-with-native-router"),next_a_link_1=require("next-a-link"),store_1=require("./store"),useExpanded=function(e){void 0===e&&(e="");var t=(0,store_1.useMenuStore)("expanded"),n=t[0],s=t[1],r=t[2].hydrated,i=void 0!==n[e]&&n[e];console.log({queryPath:e,isExpanded:i});var a=[i,function(){var t;return s(__assign(__assign({},n),((t={})[e]=!i,t)))},function(){var t;return s(__assign(__assign({},n),((t={})[e]=!0,t)))},function(){var t;return s(__assign(__assign({},n),((t={})[e]=!1,t)))},{hydrated:r}];return a};exports.useExpanded=useExpanded;
/**
 * General purpose NestedMenuItem
 *
 * TODO: make style customizable
 */
var NestedMenuItem=function(e){var t=e.title,n=e.children,s=e.icon,r=e.onClick,i=e.onDoubleClick,a=e.onContextMenu,_=e.rightIcon,l=e.target,u=e.href,o=e.showChildren,c=e.level,x=e.headersClickable,d=(0,react_with_native_router_1.useRouter)().asPath.substring(1),h=(0,exports.useExpanded)(u),v=h[0],g=h[1],f=h[2],p=(h[3],d===u),m=c||0,j=n&&n.length>0&&o,w=x||!j,b=w?"".concat(p?"text-blue-500":""," hover:text-blue-800 "):void 0;return(0,jsx_runtime_1.jsxs)(react_with_native_1.Div,__assign({className:"w-full"},{children:[(0,jsx_runtime_1.jsxs)(react_with_native_1.Div,__assign({className:"w-full flex flex-row ".concat(w?"hover:bg-gray-200 ".concat(p?"bg-gray-200 ":""):"")},{children:[(0,jsx_runtime_1.jsxs)(next_a_link_1.ALink,__assign({style:{paddingLeft:10*m+5,paddingBottom:10,paddingTop:10},className:"flex flex-row justify-between",textClassName:"flex flex-1 text-xs",href:w?u&&0!==u.length?u:"/":void 0,target:l,onDoubleClick:i,onContextMenu:a,onClick:function(e){null==r||r(),f()}},{children:[(0,jsx_runtime_1.jsxs)(react_with_native_1.Span,__assign({
//line-clamp-1 truncate text-ellipsis
textClassName:b},{children:[s||"",t]})),(0,jsx_runtime_1.jsx)(react_with_native_1.Span,__assign({className:"flex flex-row"},{children:_?(0,jsx_runtime_1.jsx)(react_with_native_1.Span,{children:_}):null}))]})),j?(0,jsx_runtime_1.jsx)(react_with_native_1.Div,__assign({className:"text-3xl",onClick:function(){return g()}},{children:v?"˯":"˃"})):null]})),j&&v?(0,jsx_runtime_1.jsx)(react_with_native_1.Div,__assign({className:"w-full"},{children:n.map((function(e,t){return(0,jsx_runtime_1.jsx)(exports.NestedMenuItem,__assign({},e,{headersClickable:x,level:m+1}),"menu-".concat(u,"-").concat(t))}))})):null]}))};exports.NestedMenuItem=NestedMenuItem;
//# sourceMappingURL=NestedMenuItem.js.map