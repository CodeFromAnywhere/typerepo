{
  "createdAt": 1673379271685,
  "updatedAt": 1673379271685,
  "deletedAt": 0,
  "createdFirstAt": 1673379271685,
  "classification": "const",
  "comments": [],
  "isExported": true,
  "name": "useFileActions",
  "slug": "use-file-actions",
  "operationRelativeTypescriptFilePath": "src/components/useFileActions.ts",
  "type": {
    "rawType": "(basePath?: string | undefined, navigation?: import(\"/Users/king/King/operations/tools/ai/ai-types/build/ReaderProps\").FolderContent[] | undefined) => import(\"/Users/king/King/operations/tools/user-interfaces/gui/dumb/context-menu/build/types\").ContextMenuItem[]",
    "typeDefinition": {
      "type": "object",
      "properties": {},
      "optional": false
    },
    "typeCoverage": 0,
    "isArray": false,
    "isEnum": false,
    "isObject": true,
    "isPrimitive": false,
    "isEnumLiteral": false,
    "simplifiedSchema": {
      "properties": [],
      "type": "object"
    }
  },
  "value": "(\n  basePath?: string,\n  navigation?: FolderContent[]\n) => {\n  const admin = useAdmin();\n\n  const updateFrontmatter = async (\n    projectRelativePath: string | undefined,\n    newFrontmatter: { [key: string]: string }\n  ) => {\n    if (!projectRelativePath) return;\n\n    if (!basePath) return;\n\n    const apiResult = await api.updateFrontmatter({\n      projectRelativePath,\n      frontmatter: newFrontmatter,\n    });\n\n    showStandardResponse(apiResult);\n\n    if (apiResult.result?.isSuccessful) {\n      admin.refetch?.();\n    }\n  };\n\n  const alert = useAlert();\n\n  const items: ContextMenuItem[] = [\n    {\n      getTitle: () => \"🗑 Delete\",\n      onClick: (projectRelativePath) => {\n        if (!projectRelativePath) return;\n\n        if (!basePath) return;\n\n        const basePathRelative = makeRelative(projectRelativePath, basePath);\n        alert?.(\"Are you sure?\", `Do you want to delete ${basePathRelative}?`, [\n          { style: \"cancel\", text: \"Cancel\" },\n          {\n            text: \"Delete\",\n            style: \"destructive\",\n            onPress: async () => {\n              // delete also works, but trash seems better for now.\n              const apiResult = await api.deleteFileOrFolder(\n                projectRelativePath\n              );\n\n              showStandardResponse(apiResult);\n\n              if (apiResult?.result?.isSuccessful) {\n                admin.refetch?.();\n              }\n            },\n          },\n        ]);\n      },\n    },\n    {\n      getTitle: () => \"📣 Rename\",\n      onClick: async (projectRelativePath) => {\n        if (!projectRelativePath) return;\n        let newFilename = prompt(\n          \"What should the new name be?\",\n          getFileOrFolderName(projectRelativePath)\n        );\n        if (!newFilename) return;\n        const apiResult = await api.renameFileOrFolder(\n          projectRelativePath,\n          newFilename\n        );\n\n        showStandardResponse(apiResult);\n        if (apiResult?.result?.isSuccessful) {\n          admin.refetch?.();\n        }\n      },\n    },\n    {\n      getTitle: () => \"↩️ Move\",\n      onClick: async (projectRelativePath) => {\n        if (!projectRelativePath) return;\n\n        if (!basePath) return;\n\n        const basePathRelative = makeRelative(projectRelativePath, basePath);\n        let newLocation = prompt(\n          \"Where should this file/folder be moved to?\",\n          getFolderJs(basePathRelative)\n        );\n        if (!newLocation) return;\n\n        const apiResult = await api.movePath(\n          projectRelativePath,\n          basePath + \"/\" + newLocation\n        );\n\n        showStandardResponse(apiResult);\n        if (apiResult?.result?.isSuccessful) {\n          admin.refetch?.();\n        }\n      },\n    },\n\n    {\n      getTitle: () => \"👯‍♀️ Make a copy\",\n      onClick: async (projectRelativePath) => {\n        if (!projectRelativePath) return;\n\n        const apiResult = await api.copyPath(projectRelativePath);\n\n        showStandardResponse(apiResult);\n\n        if (apiResult?.result?.isSuccessful) {\n          admin.refetch?.();\n        }\n      },\n    },\n\n    {\n      getTitle: () => \"🔎 Open in Explorer\",\n      onClick: async (projectRelativePath) => {\n        if (!projectRelativePath) return;\n\n        if (!basePath) return;\n\n        const apiResult = await api.fileExplorerOpen(projectRelativePath);\n\n        showStandardResponse(apiResult);\n      },\n    },\n\n    {\n      getTitle: () => \"💻 Open in VSCode\",\n      onClick: async (projectRelativePath) => {\n        if (!projectRelativePath) return;\n\n        if (!basePath) return;\n\n        const apiResult = await api.vscodeOpen({\n          files: [{ projectRelativePath }],\n        });\n\n        showStandardResponse(apiResult);\n      },\n    },\n\n    {\n      getIsEnabled: (projectRelativePath) =>\n        navigation?.find((x) => x.projectRelativePath === projectRelativePath)\n          ?.authorizedGroup !== \"\",\n      getTitle: () => \"🕊 Make free\",\n      onClick: (path) => updateFrontmatter(path, { authorizedGroup: \"\" }),\n    },\n    {\n      getIsEnabled: (projectRelativePath) =>\n        navigation?.find((x) => x.projectRelativePath === projectRelativePath)\n          ?.authorizedGroup !== \"premium\",\n\n      getTitle: () => \"🏛 Make indie-only\",\n      onClick: (path) =>\n        updateFrontmatter(path, { authorizedGroup: \"premium\" }),\n    },\n\n    {\n      getIsEnabled: (projectRelativePath) =>\n        navigation?.find((x) => x.projectRelativePath === projectRelativePath)\n          ?.authorizedGroup !== \"enterprise\",\n      getTitle: () => \"🚀 Make startup-only\",\n      onClick: (path) =>\n        updateFrontmatter(path, { authorizedGroup: \"enterprise\" }),\n    },\n\n    {\n      getIsEnabled: (projectRelativePath) =>\n        !navigation?.find((x) => x.projectRelativePath === projectRelativePath)\n          ?.isPrivate,\n      getTitle: () => \"🔑 Set private\",\n      onClick: (path) => updateFrontmatter(path, { isPrivate: \"true\" }),\n    },\n    {\n      getIsEnabled: (projectRelativePath) =>\n        navigation?.find((x) => x.projectRelativePath === projectRelativePath)\n          ?.isPrivate === true,\n      getTitle: () => \"🔑 Set public\",\n      onClick: (path) => updateFrontmatter(path, { isPrivate: \"false\" }),\n    },\n    {\n      getIsEnabled: (projectRelativePath) =>\n        navigation?.find((x) => x.projectRelativePath === projectRelativePath)\n          ?.isSecret !== true,\n      getTitle: () => \"🔒 Set secret\",\n      onClick: (path) => updateFrontmatter(path, { isSecret: \"true\" }),\n    },\n    {\n      getIsEnabled: (projectRelativePath) =>\n        navigation?.find((x) => x.projectRelativePath === projectRelativePath)\n          ?.isSecret === true,\n      getTitle: () => \"🔒 Set open\",\n      onClick: (path) => updateFrontmatter(path, { isSecret: \"false\" }),\n    },\n    {\n      getIsEnabled: (projectRelativePath) =>\n        navigation?.find((x) => x.projectRelativePath === projectRelativePath)\n          ?.isDraft !== true,\n      getTitle: () => \"🧪 Set draft\",\n      onClick: (path) => updateFrontmatter(path, { isDraft: \"true\" }),\n    },\n    {\n      getIsEnabled: (projectRelativePath) =>\n        navigation?.find((x) => x.projectRelativePath === projectRelativePath)\n          ?.isDraft === true,\n      getTitle: () => \"🧪 Set live\",\n      onClick: (path) => updateFrontmatter(path, { isDraft: \"false\" }),\n    },\n  ];\n\n  return items;\n}",
  "description": "",
  "id": "fdqprlvazxrcjkprjpvgoctt"
}